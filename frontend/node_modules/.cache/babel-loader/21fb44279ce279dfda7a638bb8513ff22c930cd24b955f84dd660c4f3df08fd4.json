{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nexport function useAuth() {\n  _s();\n  const [user, setUser] = useState(null);\n  useEffect(() => {\n    const token = localStorage.getItem(\"access_token\");\n    if (token) {\n      // Decode JWT to get user info (role, id, etc.)\n      const payload = JSON.parse(atob(token.split(\".\")[1]));\n      setUser({\n        id: payload.sub,\n        role: payload.role\n      });\n    }\n  }, []);\n  const login = token => {\n    localStorage.setItem(\"access_token\", token);\n    const payload = JSON.parse(atob(token.split(\".\")[1]));\n    setUser({\n      id: payload.sub,\n      role: payload.role\n    });\n  };\n  const logout = () => {\n    localStorage.removeItem(\"access_token\");\n    setUser(null);\n  };\n  return {\n    user,\n    login,\n    logout\n  };\n}\n_s(useAuth, \"5s2qRsV95gTJBmaaTh11GoxYeGE=\");","map":{"version":3,"names":["useState","useEffect","useAuth","_s","user","setUser","token","localStorage","getItem","payload","JSON","parse","atob","split","id","sub","role","login","setItem","logout","removeItem"],"sources":["/Users/siru/Documents/Projects/HRMS/hrms-app/frontend/src/hooks/useAuth.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\n\nexport function useAuth() {\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"access_token\");\n    if (token) {\n      // Decode JWT to get user info (role, id, etc.)\n      const payload = JSON.parse(atob(token.split(\".\")[1]));\n      setUser({ id: payload.sub, role: payload.role });\n    }\n  }, []);\n\n  const login = (token) => {\n    localStorage.setItem(\"access_token\", token);\n    const payload = JSON.parse(atob(token.split(\".\")[1]));\n    setUser({ id: payload.sub, role: payload.role });\n  };\n\n  const logout = () => {\n    localStorage.removeItem(\"access_token\");\n    setUser(null);\n  };\n\n  return { user, login, logout };\n}\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAE3C,OAAO,SAASC,OAAOA,CAAA,EAAG;EAAAC,EAAA;EACxB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGL,QAAQ,CAAC,IAAI,CAAC;EAEtCC,SAAS,CAAC,MAAM;IACd,MAAMK,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;IAClD,IAAIF,KAAK,EAAE;MACT;MACA,MAAMG,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACN,KAAK,CAACO,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACrDR,OAAO,CAAC;QAAES,EAAE,EAAEL,OAAO,CAACM,GAAG;QAAEC,IAAI,EAAEP,OAAO,CAACO;MAAK,CAAC,CAAC;IAClD;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,KAAK,GAAIX,KAAK,IAAK;IACvBC,YAAY,CAACW,OAAO,CAAC,cAAc,EAAEZ,KAAK,CAAC;IAC3C,MAAMG,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACN,KAAK,CAACO,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACrDR,OAAO,CAAC;MAAES,EAAE,EAAEL,OAAO,CAACM,GAAG;MAAEC,IAAI,EAAEP,OAAO,CAACO;IAAK,CAAC,CAAC;EAClD,CAAC;EAED,MAAMG,MAAM,GAAGA,CAAA,KAAM;IACnBZ,YAAY,CAACa,UAAU,CAAC,cAAc,CAAC;IACvCf,OAAO,CAAC,IAAI,CAAC;EACf,CAAC;EAED,OAAO;IAAED,IAAI;IAAEa,KAAK;IAAEE;EAAO,CAAC;AAChC;AAAChB,EAAA,CAxBeD,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}